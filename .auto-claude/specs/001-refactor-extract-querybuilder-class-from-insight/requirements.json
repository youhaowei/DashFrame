{
  "task_description": "Investigate GitHub Issue #4: refactor: Extract QueryBuilder class from Insight\n\n\n# GitHub Issue #4: refactor: Extract QueryBuilder class from Insight\n\n## Description\nMove SQL generation logic from `Insight` class to a dedicated `QueryBuilder` class.\n\n## Location\n- File: `packages/dataframe/src/insight.ts:413`\n\n## Rationale\nThe `generateJoinSQL` method (59 cognitive complexity) handles too many responsibilities. Extracting SQL building logic to a dedicated `QueryBuilder` class would:\n- Improve code organization and testability\n- Reduce cognitive complexity\n- Enable SQL generation reuse in other contexts\n\n## Tasks\n- [ ] Create `QueryBuilder` class with methods:\n  - `buildFieldAliasMap()`\n  - `buildJoinSelectParts()`\n  - `buildAggregationQuery()`\n  - `buildSQLClauses()` (WHERE, ORDER BY, LIMIT)\n- [ ] Migrate logic from `generateJoinSQL` to `QueryBuilder`\n- [ ] Update `Insight.toSQL()` to use `QueryBuilder`\n- [ ] Add tests for `QueryBuilder`\n\n---\nThis issue was created to track a TODO comment in the codebase.\n\n\n\n**Labels:** None\n**URL:** https://github.com/youhaowei/DashFrame/issues/4\n\n\nPlease analyze this issue and provide:\n1. A brief summary of what the issue is about\n2. A proposed solution approach\n3. The files that would likely need to be modified\n4. Estimated complexity (simple/standard/complex)\n5. Acceptance criteria for resolving this issue\n\n\n===\n\nI believe this is done but need test coverage.",
  "workflow_type": "refactoring"
}