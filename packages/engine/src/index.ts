/**
 * @dashframe/engine
 *
 * Abstract engine interfaces for DashFrame computation.
 * This package defines contracts that can be implemented for different runtimes:
 * - @dashframe/engine-browser: DuckDB-WASM + IndexedDB (browser)
 * - @dashframe/engine-server: DuckDB native + PostgreSQL (server)
 * - @dashframe/engine-mobile: SQLite (mobile)
 *
 * Re-exports @dashframe/core for convenience.
 */

// Re-export all types
export * from "@dashframe/types";

// ============================================================================
// Engine Interfaces
// ============================================================================

export type {
  // DataFrame
  DataFrameStorageLocation,
  DataFrameJSON,
  DataFrame,
  DataFrameFactory,
  // Storage
  DataFrameStorage,
  // Query Engine
  QueryResult,
  QueryEngine,
  // Query Planner
  Query,
  QueryFilter,
  QueryAggregation,
  QuerySort,
  ExecutionStrategy,
  ExecutionReason,
  ExecutionPlan,
  QueryPlanner,
  PushDownOperation,
  QueryPushDownCapable,
} from "./interfaces";

export { isQueryPushDownCapable } from "./interfaces";

// ============================================================================
// Connector Pattern
// ============================================================================

export {
  BaseConnector,
  FileSourceConnector,
  RemoteApiConnector,
} from "./connector";

export type {
  SourceType,
  FormField,
  ValidationResult,
  FileParseResult,
  RemoteDatabase,
  QueryOptions,
  ConnectorQueryResult,
  AnyConnector,
} from "./connector";

// ============================================================================
// Query Types
// ============================================================================

export type {
  FilterOperator,
  FilterPredicate,
  SortDirection,
  SortOrder,
  AggregationFunction,
  Aggregation,
  JoinType,
  JoinOptions,
} from "./types";

// ============================================================================
// SQL Generation
// ============================================================================

export {
  buildInsightSQL,
  shortenAutoGeneratedName,
  getTableName,
  metricToSqlExpression,
  type BuildInsightSQLOptions,
} from "./sql";

// ============================================================================
// Encoding Resolution
// ============================================================================

export {
  resolveToSql,
  resolveForAnalysis,
  resolveEncodingToSql,
  type EncodingResolutionContext,
  type ResolvedForAnalysis,
  type ResolvedEncoding,
} from "./sql";

// ============================================================================
// Date Transforms
// ============================================================================

export {
  selectTemporalAggregation,
  applyDateTransformToSql,
  getAxisTypeForTransform,
  temporalTransform,
  categoricalTransform,
  getDateTransformLabel,
} from "./sql";
